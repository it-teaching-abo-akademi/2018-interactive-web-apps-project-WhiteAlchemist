(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){},21:function(e,t,a){e.exports=a(53)},26:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(19),o=a.n(r);a(26),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=a(2),c=a(3),i=a(6),u=a(4),d=a(5),m=(a(10),a(9)),p=a.n(m),f=a(12),h=a(8),v=a(7),y=a.n(v),E=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).isSelected=function(){var e=a.state.selected;e=!e,a.setState({selected:e}),a.props.selected(a.props.index),console.log("you selected me!"+a.props.index)},a.remove=function(){console.log("I am removing stock with index: "+a.props.index),a.props.deleteStock(a.props.index)},a.state={name:a.props.name,unit_value:parseFloat(a.props.unit_value).toFixed(2),quantity:a.props.quantity,total_value:parseFloat(a.props.quantity)*parseFloat(a.props.unit_value),selected:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("tr",null,l.a.createElement("td",null,this.state.name),l.a.createElement("td",null,this.state.unit_value),l.a.createElement("td",null,this.state.quantity),l.a.createElement("td",null,this.state.total_value.toFixed(2)),l.a.createElement("td",null,l.a.createElement("input",{type:"radio",onChange:this.isSelected})))}}]),t}(l.a.Component),b=(a(50),a(20)),g=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).addStock=function(){var e=a.refs.stock_symbol.value,t=a.refs.shares.value;Number.isInteger(parseFloat(t))?""!=e?y.a.get("https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol="+e+"&apikey=YWH47VG0N6XC0JBI").then(function(n){if(void 0==n.data["Error Message"]){var l=n.data["Time Series (Daily)"],r=0;for(var o in l){r=l[o]["4. close"],console.log(r);break}var s=a.state.stocks,c=!1;for(var i in s)s[i].name==e&&(c=!0,s[i].quantity=parseInt(s[i].quantity)+parseInt(t));if(!c&&s.length<=50){var u={name:e,unit_value:r,quantity:t};s.push(u)}else if(s.length>50)return void alert("You cannot add more than 50 symbols in one portfolio!");a.setState({stocks:s}),a.refs.popup.style.display="none",a.sum(),a.updateStorage()}else alert("Unknown stock symbol!")}).catch(function(e){alert("Unknown stock symbol!")}):alert("Stock symbol cannot be left empty!"):alert("Number of shares should be an integer!")},a.changeToEuro=function(){if("\u20ac"==a.refs.currency_symbol.innerHTML)return a.refs.lbleuro.style.background="yellow",void(a.refs.lblusd.style.background="lightgrey");y.a.get("https://www.alphavantage.co/query?function=CURRENCY_EXCHANGE_RATE&from_currency=USD&to_currency=EUR&apikey=YWH47VG0N6XC0JBI").then(function(e){var t=e.data["Realtime Currency Exchange Rate"]["5. Exchange Rate"];console.log(e.data["Realtime Currency Exchange Rate"]["5. Exchange Rate"]);var n=a.state.stocks;for(var l in n)n[l].unit_value=parseFloat(n[l].unit_value*t).toFixed(2);a.refs.currency_symbol.innerHTML="\u20ac",a.setState({stocks:n}),console.log(a.state.stocks),a.sum(),a.refs.lbleuro.style.background="yellow",a.refs.lblusd.style.background="lightgrey"}).catch(function(e){alert("Currency Exchange error!")})},a.changeToUSD=function(){if("$"==a.refs.currency_symbol.innerHTML)return a.refs.lbleuro.style.background="lightgrey",void(a.refs.lblusd.style.background="yellow");y.a.get("https://www.alphavantage.co/query?function=CURRENCY_EXCHANGE_RATE&from_currency=EUR&to_currency=USD&apikey=YWH47VG0N6XC0JBI").then(function(e){var t=e.data["Realtime Currency Exchange Rate"]["5. Exchange Rate"];console.log(e.data["Realtime Currency Exchange Rate"]["5. Exchange Rate"]);var n=a.state.stocks;for(var l in n)n[l].unit_value=parseFloat(n[l].unit_value*t).toFixed(2);a.refs.currency_symbol.innerHTML="$",a.setState({stocks:n}),console.log(a.state.stocks),a.sum(),a.refs.lbleuro.style.background="lightgrey",a.refs.lblusd.style.background="yellow"}).catch(function(e){alert("Currency Exchange error!")})},a.deleteStock=function(e){console.log("Removing stock: "+e);var t=a.state.stocks;t.splice(e,1),a.setState({stocks:t})},a.updateStorage=function(){var e=JSON.parse(localStorage.getItem("portfolios"));for(var t in e)if(e[t].name==a.props.children){e[t].stocks=a.state.stocks;break}localStorage.setItem("portfolios",JSON.stringify(e))},a.update=Object(f.a)(p.a.mark(function e(){var t,n,l;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(l in t=a.props.stocks,n=function(e){var n=t[e].name;y.a.get("https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol="+n+"&apikey=YWH47VG0N6XC0JBI").then(function(n){if(void 0==n.data["Time Series (Daily)"])throw!0;var l=n.data["Time Series (Daily)"],r=0;for(var o in l){r=l[o]["4. close"],console.log(r);break}t[e].unit_value=r,a.sum(),a.setState({stocks:t}),a.updateStorage()}).catch(function(e){})},t)n(l);a.refs.currency_symbol.innerHTML="$",a.refs.lblusd.style.background="lightgrey",a.refs.lbleuro.style.background="lightgrey";case 6:case"end":return e.stop()}},e,this)})),a.sleep=function(e){return new Promise(function(t){return setTimeout(t,e)})},a.deleteStocks=function(){var e=a.state.selected.sort();console.log("this items to remove"),console.log(e);a.state.stocks;for(var t in e)a.deleteStock(e[t]-t),console.log("removed: "+e[t]);a.updateStorage(),a.setState({selected:[]}),a.sum()},a.close=function(){a.refs.popup.style.display="none",a.refs.graph.style.display="none",a.refs.chart.innerHTML=""},a.sum=function(){var e=0,t=a.state.stocks;for(var n in t)e+=t[n].unit_value*t[n].quantity;a.setState({total:parseFloat(e).toFixed(2)}),console.log("total is: "+a.state.total)},a.remove=function(){a.props.deletePortfolio(a.props.index)},a.selected=function(e){var t=a.state.selected;t.push(e),a.setState({selected:t}),console.log("Items selected"+t)},a.popup=function(){a.refs.popup.style.display="block"},a.openGraph=function(){a.refs.graph.style.display="block"},a.drawGraph=Object(f.a)(p.a.mark(function e(){var t,n,l,r,o,s,c,i,u,d,m;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state.selected,n=a.state.stocks,l=a.refs.start.value,r=a.refs.end.value,""!=l&&""!=r){e.next=7;break}return alert("Select start and end dates!"),e.abrupt("return");case 7:for(s in o=[],t)o[s]=n[t[s]].name;for(m in c=[],i=[],u={},0==o.length&&alert("No stocks were selected!"),d=function(e){y.a.get("https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol="+o[e]+"&apikey=YWH47VG0N6XC0JBI").then(function(t){if(void 0==t.data["Time Series (Daily)"])throw!0;var n=t.data["Time Series (Daily)"];u[o[e].toString()]=e.toString();var s=[],d=[];for(var m in s.push(e.toString()),d.push(o[e].toString()),n)new Date(m)>=new Date(l)&&new Date(m)<=new Date(r)&&(s.push(m),d.push(n[m]["4. close"]));c.push(s),i.push(d),a.renderChart(c,i,u,l,r)}).catch(function(e){alert("Too many requests!")})},o)d(m);case 15:case"end":return e.stop()}},e,this)})),a.renderNormal=function(){return l.a.createElement("div",{className:"portfolio"},l.a.createElement("a",{onClick:a.remove,className:"close-thik"}),l.a.createElement("p",null),l.a.createElement("p",null),l.a.createElement("br",null),l.a.createElement("div",null," ",a.props.children,l.a.createElement("div",{className:"divider"}),l.a.createElement("label",{onClick:a.changeToEuro,ref:"lbleuro"},"Show in \u20ac"),l.a.createElement("div",{className:"divider"}),l.a.createElement("label",{onClick:a.changeToUSD,ref:"lblusd"},"Show in $")),l.a.createElement("p",null),l.a.createElement("br",null),l.a.createElement("div",{style:{overflowX:"auto"}},l.a.createElement("table",{style:{border:"1px solid black"}},l.a.createElement("tbody",null,l.a.createElement("tr",{style:{border:"1px solid black"}},l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Unit value"),l.a.createElement("th",null,"Quantity"),l.a.createElement("th",null,"Total value"),l.a.createElement("th",null,"Select")),a.state.stocks.map(a.eachStock,Object(h.a)(Object(h.a)(a)))))),l.a.createElement("p",null),l.a.createElement("p",null,"Total value of ",a.props.children," is ",a.state.total," ",l.a.createElement("span",{ref:"currency_symbol"},"$")),l.a.createElement("button",{onClick:a.popup},"Add Stock"),l.a.createElement("div",{className:"divider"}),l.a.createElement("button",{onClick:a.openGraph},"Perf graph"),l.a.createElement("div",{className:"divider"}),l.a.createElement("button",{onClick:a.deleteStocks},"Remove selected"),l.a.createElement("div",{className:"divider"}),l.a.createElement("button",{onClick:a.update},"Update Portfolio"),l.a.createElement("div",{ref:"graph",className:"modal"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("span",{ref:"close",className:"close",onClick:a.close},"\xd7"),l.a.createElement("h1",null,"Stocks' value history"),l.a.createElement("div",{id:"chart",ref:"chart"}),l.a.createElement("h6",null,"Select dates"),l.a.createElement("a",null,"Start date:"),l.a.createElement("input",{type:"date",ref:"start"}),l.a.createElement("div",{className:"divider"}),l.a.createElement("a",null,"End date:"),l.a.createElement("input",{type:"date",ref:"end"}),l.a.createElement("div",{className:"divider"}),l.a.createElement("button",{onClick:a.drawGraph},"Draw graph"))),l.a.createElement("div",{ref:"popup",className:"modal"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("span",{ref:"close",className:"close",onClick:a.close},"\xd7"),l.a.createElement("h1",null,"Add Stock"),l.a.createElement("table",{style:{border:"1px solid black"}},l.a.createElement("tbody",null,l.a.createElement("tr",{style:{border:"1px solid black"}},l.a.createElement("td",null,"Stock's symbol"),l.a.createElement("td",null," ",l.a.createElement("input",{type:"text",placeholder:"Stock's symbol",ref:"stock_symbol",required:!0}))),l.a.createElement("tr",{style:{border:"1px solid black"}},l.a.createElement("td",null,"Number of shares"),l.a.createElement("td",null,l.a.createElement("input",{type:"number",ref:"shares",required:!0}))),l.a.createElement("tr",{style:{border:"1px solid black"}},l.a.createElement("td",null,l.a.createElement("button",{type:"button",className:"btn",onClick:a.addStock},"Add Stock")),l.a.createElement("td",null)))))))};return a.state={editing:!1,selected:[],stocks:a.props.stocks,total:function(){var e=0,t=a.props.stocks;for(var n in console.log(t),t)e+=t[n].unit_value*t[n].quantity;return parseFloat(e).toFixed(2)}(),history:[]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"eachStock",value:function(e,t){return l.a.createElement(E,{key:e.name+e.unit_value+e.quantity,index:t,name:e.name,unit_value:e.unit_value,quantity:e.quantity,selected:this.selected,remove:this.deleteStock})}},{key:"renderChart",value:function(e,t,a,n,l){var r=[];for(var o in console.log("check dates ",e),e)r.push(e[o]);for(var s in t)r.push(t[s]);console.log("This is json: "+JSON.stringify(a)),console.log("This is cols: "+JSON.stringify(r));b.generate({bindto:this.refs.chart,data:{xs:a,columns:r},axis:{x:{type:"timeseries",tick:{format:"%Y-%m-%d"}}}})}},{key:"render",value:function(){return this.renderNormal()}}]),t}(l.a.Component),k=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).add=function(){var e=a.refs.portfolio_name.value;a.refs.portfolio_name.value="";a.state.portfolios;if(""!=e){var t=a.state.portfolios;if(10!=t.length){for(var n in t)if(t[n].name==e)return void alert("There is already a portfolio with this name!");var l={name:e,stocks:[]};t.push(l),a.setState({portfolios:t}),localStorage.setItem("portfolios",JSON.stringify(t))}else alert("The maximum number of portfolios that can be created is 10!")}else alert("Name of Portfolio should not be empty!")},a.removePortfolio=function(e){console.log("Removing portfolio "+e);var t=a.state.portfolios;t.splice(e,1),a.setState({portfolios:t}),localStorage.setItem("portfolios",JSON.stringify(t))};var n=[];return null==localStorage.getItem("portfolios")?localStorage.setItem("portfolios",JSON.stringify([])):n=JSON.parse(localStorage.getItem("portfolios")),a.state={portfolios:n},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"eachPortfolio",value:function(e,t){return l.a.createElement(g,{key:e.name,index:t,deletePortfolio:this.removePortfolio,stocks:e.stocks},e.name)}},{key:"render",value:function(){return"[]"!=localStorage.getItem("portfolios")?l.a.createElement("div",{style:{padding:"2%"}},l.a.createElement("div",{className:"head"},l.a.createElement("div",{style:{overflowX:"auto"}},l.a.createElement("table",{className:"table"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Portfolio Name:"),l.a.createElement("td",null,l.a.createElement("input",{type:"text",ref:"portfolio_name"})),l.a.createElement("td",null,l.a.createElement("button",{onClick:this.add.bind(null)},"Add new portfolio"))))))),this.state.portfolios.map(this.eachPortfolio,this)):l.a.createElement("div",{style:{padding:"2%"}},l.a.createElement("div",{className:"head"},l.a.createElement("table",{className:"table"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Portfolio Name:"),l.a.createElement("td",null,l.a.createElement("input",{type:"text",ref:"portfolio_name",className:"input-res"})),l.a.createElement("td",null,l.a.createElement("button",{onClick:this.add.bind(null)},"Add new portfolio")))))),l.a.createElement("h2",{style:{padding:"2%"}},"No portfolio is currently stored!"))}}]),t}(l.a.Component),S=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),l.a.createElement(k,null))}}]),t}(l.a.Component);o.a.render(l.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,2,1]]]);
//# sourceMappingURL=main.3cf964e9.chunk.js.map