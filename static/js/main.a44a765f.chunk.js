(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){},21:function(e,t,a){e.exports=a(53)},26:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(19),l=a.n(r);a(26),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=a(2),c=a(3),i=a(6),u=a(4),d=a(5),m=(a(11),a(7)),p=a.n(m),f=a(10),h=a(9),v=a(8),y=a.n(v),E=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).isSelected=function(){var e=a.state.selected;e=!e,a.setState({selected:e}),a.props.selected(a.props.index),console.log("you selected me!"+a.props.index+" "+e)},a.remove=function(){console.log("I am removing stock with index: "+a.props.index),a.props.deleteStock(a.props.index)},a.state={name:a.props.name,unit_value:parseFloat(a.props.unit_value).toFixed(2),quantity:a.props.quantity,total_value:parseFloat(a.props.quantity)*parseFloat(a.props.unit_value),selected:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("tr",null,o.a.createElement("td",null,this.state.name),o.a.createElement("td",null,this.state.unit_value),o.a.createElement("td",null,this.state.quantity),o.a.createElement("td",null,this.state.total_value.toFixed(2)),o.a.createElement("td",null,o.a.createElement("input",{type:"checkbox",onChange:this.isSelected})))}}]),t}(o.a.Component),b=(a(50),a(20)),g=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).addStock=function(){var e=a.refs.stock_symbol.value,t=a.refs.shares.value;Number.isInteger(parseFloat(t))?""!=e?y.a.get("https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol="+e+"&apikey=YWH47VG0N6XC0JBI").then(function(n){if(void 0==n.data["Error Message"])if(void 0==n.data.Note){var o=n.data["Time Series (Daily)"],r=0;for(var l in o){r=o[l]["4. close"],console.log(r);break}var s=a.state.stocks,c=!1;for(var i in s)s[i].name==e&&(c=!0,s[i].quantity=parseInt(s[i].quantity)+parseInt(t));if(!c&&s.length<=50){var u={name:e,unit_value:r,quantity:t};s.push(u)}else if(s.length>50)return void alert("You cannot add more than 50 symbols in one portfolio!");a.setState({stocks:s}),a.refs.popup.style.display="none",a.sum(),a.updateStorage()}else alert("There was a problem with API!");else alert("Unknown stock symbol!")}).catch(function(e){alert("Unknown stock symbol!")}):alert("Stock symbol cannot be left empty!"):alert("Number of shares should be an integer!")},a.changeToEuro=function(){"\u20ac"==a.refs.currency_symbol.innerHTML?(a.refs.lbleuro.style.background="yellow",a.refs.lblusd.style.background="lightgrey"):y.a.get("https://www.alphavantage.co/query?function=CURRENCY_EXCHANGE_RATE&from_currency=USD&to_currency=EUR&apikey=YWH47VG0N6XC0JBI").then(function(e){var t=e.data["Realtime Currency Exchange Rate"]["5. Exchange Rate"];console.log(e.data["Realtime Currency Exchange Rate"]["5. Exchange Rate"]);var n=a.state.stocks;for(var o in n)n[o].unit_value=parseFloat(n[o].unit_value*t).toFixed(2);a.refs.currency_symbol.innerHTML="\u20ac",a.setState({stocks:n}),console.log(a.state.stocks),a.sum(),a.refs.lbleuro.style.background="yellow",a.refs.lblusd.style.background="lightgrey",a.setState({selected:[]})}).catch(function(e){alert("Currency Exchange error!")})},a.changeToUSD=function(){"$"==a.refs.currency_symbol.innerHTML?(a.refs.lbleuro.style.background="lightgrey",a.refs.lblusd.style.background="yellow"):y.a.get("https://www.alphavantage.co/query?function=CURRENCY_EXCHANGE_RATE&from_currency=EUR&to_currency=USD&apikey=YWH47VG0N6XC0JBI").then(function(e){var t=e.data["Realtime Currency Exchange Rate"]["5. Exchange Rate"];console.log(e.data["Realtime Currency Exchange Rate"]["5. Exchange Rate"]);var n=a.state.stocks;for(var o in n)n[o].unit_value=parseFloat(n[o].unit_value*t).toFixed(2);a.refs.currency_symbol.innerHTML="$",a.setState({stocks:n}),console.log(a.state.stocks),a.sum(),a.refs.lbleuro.style.background="lightgrey",a.refs.lblusd.style.background="yellow",a.setState({selected:[]})}).catch(function(e){alert("Currency Exchange error!")})},a.deleteStock=function(e){console.log("Removing stock: "+e);var t=a.state.stocks;t.splice(e,1),a.setState({stocks:t})},a.updateStorage=function(){var e=JSON.parse(localStorage.getItem("portfolios"));for(var t in e)if(e[t].name==a.props.children){e[t].stocks=a.state.stocks;break}localStorage.setItem("portfolios",JSON.stringify(e))},a.update=Object(f.a)(p.a.mark(function e(){var t,n,o,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r in t=a.props.stocks,n=a.props.stocks,a.setState({stocks:[]}),o=function(e){var o=t[e].name;y.a.get("https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol="+o+"&apikey=YWH47VG0N6XC0JBI").then(function(n){if(void 0==n.data["Time Series (Daily)"])throw!0;var o=n.data["Time Series (Daily)"],r=0;for(var l in o){r=o[l]["4. close"],console.log(r);break}t[e].unit_value=r,a.sum(),a.setState({stocks:t}),a.updateStorage()}).catch(function(e){a.setState({stocks:n})})},t)o(r);a.refs.currency_symbol.innerHTML="$",a.refs.lblusd.style.background="lightgrey",a.refs.lbleuro.style.background="lightgrey",a.setState({selected:[]});case 9:case"end":return e.stop()}},e,this)})),a.sleep=function(e){return new Promise(function(t){return setTimeout(t,e)})},a.deleteStocks=function(){var e=a.state.selected.sort();console.log("this items to remove"),console.log(e);a.state.stocks;for(var t in e)a.deleteStock(e[t]-t),console.log("removed: "+e[t]);a.updateStorage(),a.setState({selected:[]}),a.sum()},a.close=function(){a.refs.popup.style.display="none",a.refs.graph.style.display="none",a.refs.chart.innerHTML=""},a.sum=function(){var e=0,t=a.state.stocks;for(var n in t)e+=t[n].unit_value*t[n].quantity;a.setState({total:parseFloat(e).toFixed(2)}),console.log("total is: "+a.state.total)},a.remove=function(){a.props.deletePortfolio(a.props.index)},a.selected=function(e){var t=a.state.selected;t.indexOf(e)>-1?t.splice(t.indexOf(e),1):t.push(e),a.setState({selected:t})},a.popup=function(){a.refs.popup.style.display="block"},a.openGraph=function(){a.refs.graph.style.display="block"},a.drawGraph=Object(f.a)(p.a.mark(function e(){var t,n,o,r,l,s,c,i,u,d,m;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state.selected,n=a.state.stocks,o=a.refs.start.value,r=a.refs.end.value,""!=o&&""!=r){e.next=7;break}return alert("Select start and end dates!"),e.abrupt("return");case 7:for(s in l=[],t)l[s]=n[t[s]].name;for(m in c=[],i=[],u={},0==l.length&&alert("No stocks were selected!"),d=function(e){y.a.get("https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol="+l[e]+"&apikey=YWH47VG0N6XC0JBI").then(function(t){if(void 0==t.data["Time Series (Daily)"])throw!0;var n=t.data["Time Series (Daily)"];u[l[e].toString()]=e.toString();var s=[],d=[];for(var m in s.push(e.toString()),d.push(l[e].toString()),n)new Date(m)>=new Date(o)&&new Date(m)<=new Date(r)&&(s.push(m),d.push(n[m]["4. close"]));c.push(s),i.push(d),a.renderChart(c,i,u,o,r)}).catch(function(e){alert("Too many requests!")})},l)d(m);case 15:case"end":return e.stop()}},e,this)})),a.renderNormal=function(){return o.a.createElement("div",{className:"portfolio"},o.a.createElement("a",{onClick:a.remove,className:"close-thik"}),o.a.createElement("p",null),o.a.createElement("p",null),o.a.createElement("br",null),o.a.createElement("div",null," ",a.props.children,o.a.createElement("div",{className:"divider"}),o.a.createElement("label",{onClick:a.changeToEuro,ref:"lbleuro"},"Show in \u20ac"),o.a.createElement("div",{className:"divider"}),o.a.createElement("label",{onClick:a.changeToUSD,ref:"lblusd"},"Show in $")),o.a.createElement("p",null),o.a.createElement("br",null),o.a.createElement("div",{style:{overflowX:"auto"}},o.a.createElement("table",{style:{border:"1px solid black"}},o.a.createElement("tbody",null,o.a.createElement("tr",{style:{border:"1px solid black"}},o.a.createElement("th",null,"Name"),o.a.createElement("th",null,"Unit value"),o.a.createElement("th",null,"Quantity"),o.a.createElement("th",null,"Total value"),o.a.createElement("th",null,"Select")),a.state.stocks.map(a.eachStock,Object(h.a)(Object(h.a)(a)))))),o.a.createElement("p",null),o.a.createElement("p",null,"Total value of ",a.props.children," is ",a.state.total," ",o.a.createElement("span",{ref:"currency_symbol"},"$")),o.a.createElement("button",{onClick:a.popup},"Add Stock"),o.a.createElement("div",{className:"divider"}),o.a.createElement("button",{onClick:a.openGraph},"Perf graph"),o.a.createElement("div",{className:"divider"}),o.a.createElement("button",{onClick:a.deleteStocks},"Remove selected"),o.a.createElement("div",{className:"divider"}),o.a.createElement("button",{onClick:a.update},"Update Portfolio"),o.a.createElement("div",{ref:"graph",className:"modal"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("span",{ref:"close",className:"close",onClick:a.close},"\xd7"),o.a.createElement("h1",null,"Stocks' value history"),o.a.createElement("div",{id:"chart",ref:"chart"}),o.a.createElement("h6",null,"Select dates"),o.a.createElement("a",null,"Start date:"),o.a.createElement("input",{type:"date",ref:"start"}),o.a.createElement("div",{className:"divider"}),o.a.createElement("a",null,"End date:"),o.a.createElement("input",{type:"date",ref:"end"}),o.a.createElement("div",{className:"divider"}),o.a.createElement("button",{onClick:a.drawGraph},"Draw graph"))),o.a.createElement("div",{ref:"popup",className:"modal"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("span",{ref:"close",className:"close",onClick:a.close},"\xd7"),o.a.createElement("h1",null,"Add Stock"),o.a.createElement("table",{style:{border:"1px solid black"}},o.a.createElement("tbody",null,o.a.createElement("tr",{style:{border:"1px solid black"}},o.a.createElement("td",null,"Stock's symbol"),o.a.createElement("td",null," ",o.a.createElement("input",{type:"text",placeholder:"Stock's symbol",ref:"stock_symbol",required:!0}))),o.a.createElement("tr",{style:{border:"1px solid black"}},o.a.createElement("td",null,"Number of shares"),o.a.createElement("td",null,o.a.createElement("input",{type:"number",ref:"shares",required:!0}))),o.a.createElement("tr",{style:{border:"1px solid black"}},o.a.createElement("td",null,o.a.createElement("button",{type:"button",className:"btn",onClick:a.addStock},"Add Stock")),o.a.createElement("td",null)))))))};return a.state={editing:!1,selected:[],stocks:a.props.stocks,total:function(){var e=0,t=a.props.stocks;for(var n in console.log(t),t)e+=t[n].unit_value*t[n].quantity;return parseFloat(e).toFixed(2)}(),history:[]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"eachStock",value:function(e,t){return o.a.createElement(E,{key:e.name+e.unit_value+e.quantity,index:t,name:e.name,unit_value:e.unit_value,quantity:e.quantity,selected:this.selected,remove:this.deleteStock})}},{key:"renderChart",value:function(e,t,a,n,o){var r=[];for(var l in console.log("check dates ",e),e)r.push(e[l]);for(var s in t)r.push(t[s]);console.log("This is json: "+JSON.stringify(a)),console.log("This is cols: "+JSON.stringify(r));b.generate({bindto:this.refs.chart,data:{xs:a,columns:r},axis:{x:{type:"timeseries",tick:{format:"%Y-%m-%d"}}}})}},{key:"render",value:function(){return this.renderNormal()}}]),t}(o.a.Component),k=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).add=function(){var e=a.refs.portfolio_name.value;a.refs.portfolio_name.value="";a.state.portfolios;if(""!=e){var t=a.state.portfolios;if(10!=t.length){for(var n in t)if(t[n].name==e)return void alert("There is already a portfolio with this name!");var o={name:e,stocks:[]};t.push(o),a.setState({portfolios:t}),localStorage.setItem("portfolios",JSON.stringify(t))}else alert("The maximum number of portfolios that can be created is 10!")}else alert("Name of Portfolio should not be empty!")},a.removePortfolio=function(e){console.log("Removing portfolio "+e);var t=a.state.portfolios;t.splice(e,1),a.setState({portfolios:t}),localStorage.setItem("portfolios",JSON.stringify(t))},a.updateStorage=function(e,t){var a=JSON.parse(localStorage.getItem("portfolios"));for(var n in a)if(a[n].name==e){a[n].stocks=t;break}localStorage.setItem("portfolios",JSON.stringify(a))},a.update=Object(f.a)(p.a.mark(function e(){var t,n,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(o in t=JSON.parse(localStorage.getItem("portfolios")),n=function(e){var n=function(t){var a=e.stocks[t].name;y.a.get("https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol="+a+"&apikey=YWH47VG0N6XC0JBI").then(function(a){if(void 0==a.data["Time Series (Daily)"])throw!0;var n=a.data["Time Series (Daily)"],o=0;for(var r in n){o=n[r]["4. close"],console.log(o);break}e.stocks[t].unit_value=o}).catch(function(e){})};for(var o in e.stocks)n(o);a.updateStorage(t[e].name,e.stocks)},t)n(o);case 3:case"end":return e.stop()}},e,this)}));var n=[];return null==localStorage.getItem("portfolios")?localStorage.setItem("portfolios",JSON.stringify([])):n=JSON.parse(localStorage.getItem("portfolios")),a.state={portfolios:n},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"eachPortfolio",value:function(e,t){return o.a.createElement(g,{key:e.name,index:t,deletePortfolio:this.removePortfolio,stocks:e.stocks},e.name)}},{key:"render",value:function(){return"[]"!=localStorage.getItem("portfolios")?o.a.createElement("div",{style:{padding:"2%"}},o.a.createElement("div",{className:"head"},o.a.createElement("div",{style:{overflowX:"auto"}},o.a.createElement("table",{className:"table"},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,"Portfolio Name:"),o.a.createElement("td",null,o.a.createElement("input",{type:"text",ref:"portfolio_name"})),o.a.createElement("td",null,o.a.createElement("button",{onClick:this.add.bind(null)},"Add new portfolio"))))))),this.state.portfolios.map(this.eachPortfolio,this)):o.a.createElement("div",{style:{padding:"2%"}},o.a.createElement("div",{className:"head"},o.a.createElement("table",{className:"table"},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,"Portfolio Name:"),o.a.createElement("td",null,o.a.createElement("input",{type:"text",ref:"portfolio_name",className:"input-res"})),o.a.createElement("td",null,o.a.createElement("button",{onClick:this.add.bind(null)},"Add new portfolio")))))),o.a.createElement("h2",{style:{padding:"2%"}},"No portfolio is currently stored!"))}}]),t}(o.a.Component),S=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),o.a.createElement(k,null))}}]),t}(o.a.Component);l.a.render(o.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,2,1]]]);
//# sourceMappingURL=main.a44a765f.chunk.js.map